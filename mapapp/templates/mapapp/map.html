{% extends "home/base.html" %}
{% load static %}

{% block content %}
<div class="container-fluid p-0">
    <h2 class="text-center my-3">Coffee Shops Map</h2>
    <div class="row" style="height: 85vh;">

        <!-- Info panel on the left -->
        <div class="col-md-4 bg-dark text-white p-4" style="overflow-y: auto;">
            <h5 class="text-warning">üó∫Ô∏è Select a coffee shop</h5>
            <div id="shop-details" class="mt-3 small">
                <p class="text-muted">Click any pin on the map to see details here.</p>
            </div>
        </div>

        <!-- Map on the right -->
        <div class="col-md-8 p-0">
            <div id="map" style="width: 100%; height: 100%;"></div>
        </div>
    </div>
</div>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- Safely embed coffee shop data -->
{{ coffee_shops|json_script:"coffeeShopsData" }}

<!-- Custom Map Logic -->
<script src="{% static 'mapapp/js/map.js' %}"></script>
{% endblock %}

{% block extra_styles %}
<style>
.emoji-icon {
    font-size: 22px;
    text-align: center;
    line-height: 25px;
}
</style>
{% endblock %}

{% for shop in coffee_shops %}
    <div>
        <h5>{{ shop.name }}</h5>
        <img src="{{ shop.image.url }}" alt="{{ shop.name }}" class="img-fluid" style="max-width: 100%;">
        <p>{{ shop.amenities }}</p>
    </div>
{% endfor %}
